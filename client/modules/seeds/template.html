<template name="seeds">

  {{> breadcrumb}}

  <h2 class="page-header">Semillas</h2>

  {{> seedsMenu}}

  <div class="row">

    {{#each seeds}}
      {{> seedsTableItem}}
    {{/each}}

  </div>

</template>

<template name="seedsMenu">
  <div class="row">
    <div class="col-md-4">
  
      {{#if isInRole 'super-admin,admin,editor'}}
        <a class="btn btn-success" href="{{pathFor 'seeds.add'}}" role="button">Añadir semilla</a>
      {{/if}}

      <a class="btn btn-primary" href="{{urlFor 'seeds.families.index'}}">Familias</a>
      <a class="btn btn-primary" href="{{urlFor 'seeds.calendar'}}">
        <i class="fa fa-calendar" aria-hidden="true"></i>
        Calendario
      </a>
      <br>
      <br>
    </div>
  </div>
</template>

<template name="seedTimeCalendar">

  {{> breadcrumb}}

  <h2 class="page-header">Calendario de siembra</h2>

  <div class="row">
    <div class="col-md-12">
      {{> seedsCalendar}}
    </div>
  </div>

</template>

<template name="seedsTableItem">

  <div class="col-xs-6 col-md-4">

    <div class="thumbnail">
      <a href="{{pathFor 'seeds.one'}}">
        {{#if highlightedImage}}
          <img src="{{highlightedImage}}" alt="{{variant}}" title="{{variant}}">   
        {{else}}
          <img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMjQyIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDI0MiAyMDAiIHByZXNlcnZlQXNwZWN0UmF0aW89Im5vbmUiPjwhLS0KU291cmNlIFVSTDogaG9sZGVyLmpzLzEwMCV4MjAwCkNyZWF0ZWQgd2l0aCBIb2xkZXIuanMgMi42LjAuCkxlYXJuIG1vcmUgYXQgaHR0cDovL2hvbGRlcmpzLmNvbQooYykgMjAxMi0yMDE1IEl2YW4gTWFsb3BpbnNreSAtIGh0dHA6Ly9pbXNreS5jbwotLT48ZGVmcz48c3R5bGUgdHlwZT0idGV4dC9jc3MiPjwhW0NEQVRBWyNob2xkZXJfMTU5NTU0MTI3MjggdGV4dCB7IGZpbGw6I0FBQUFBQTtmb250LXdlaWdodDpib2xkO2ZvbnQtZmFtaWx5OkFyaWFsLCBIZWx2ZXRpY2EsIE9wZW4gU2Fucywgc2Fucy1zZXJpZiwgbW9ub3NwYWNlO2ZvbnQtc2l6ZToxMnB0IH0gXV0+PC9zdHlsZT48L2RlZnM+PGcgaWQ9ImhvbGRlcl8xNTk1NTQxMjcyOCI+PHJlY3Qgd2lkdGg9IjI0MiIgaGVpZ2h0PSIyMDAiIGZpbGw9IiNFRUVFRUUiLz48Zz48dGV4dCB4PSI4OS44NTE1NjI1IiB5PSIxMDUuMzYyNSI+MjQyeDIwMDwvdGV4dD48L2c+PC9nPjwvc3ZnPg==" alt="{{variant}}" title="{{variant}}">   
        {{/if}}
      </a>
      <div class="caption">
        <h3><a href="{{pathFor 'seeds.one'}}">{{variant}}</a></h3>
        <p>{{monthName seedTime.from}} ~ {{monthName harvestTime.from}}</p>
        
        {{#if isInRole 'super-admin,admin,editor'}}
          <a class="btn btn-default" href="{{pathFor 'seeds.one.edit'}}">Editar</a>
          <a class="btn btn-danger remove-item" href="#">Eliminar</a>
        {{/if}}

      </div>
    </div>

    <!-- <div class="panel panel-default">
      <div class="panel-heading"><a href="{{pathFor 'seeds.one'}}">{{variant}}</a></div>
      <div class="panel-body">
        
        <p>{{monthName seedTime.from}} ~ {{monthName harvestTime.from}}</p>

        {{#if isInRole 'super-admin,admin,editor'}}
          <a class="btn btn-default" href="{{pathFor 'seeds.one.edit'}}">Editar</a>
          <a class="btn btn-danger remove-item" href="#">Eliminar</a>
        {{/if}}

      </div>
    </div> -->
  </div>

</template>

<template name="seedsView">

  {{> breadcrumb}}

  <h2 class="page-header">{{seed.variant}}</h2>
  
  <div class="row">
    <div class="col-md-6">
      <div class="panel panel-default">
        <div class="panel-heading">
          <h3 class="panel-title">Información general</h3>
        </div>
        <ul class="list-group">
          <li class="list-group-item">{{seed.name}}</li>
          <li class="list-group-item">{{familyName seed.family}}</li>
          {{#if seed.coldSupport}}
          <li class="list-group-item">Resistencia al frío. Mínimo {{seed.coldSupport}} grados.</li>
          {{/if}}
        </ul>
      </div>
    </div>

    {{> resourcesList seed}}
    
  </div>

  <div class="row">
    <div class="col-md-12">
      {{> seedCalendar}}
    </div>
  </div>

  <div class="row">
    <div class="col-md-6">
      <div class="bs-callout bs-callout-success" id="callout-input-needs-type">
        <h4>Compatibles</h4>
        <p>{{{compatibleSeeds seed}}}</p>
      </div>
    </div>

    <div class="col-md-6">
      <div class="bs-callout bs-callout-danger" id="callout-input-needs-type">
        <h4>Incompatibles</h4>
        <p>{{{incompatibleSeeds seed}}}</p>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-md-12">
      <div class="panel panel-default">
        <div class="panel-heading">
          <h3 class="panel-title">Separaciones</h3>
        </div>
        <table class="table">
          <tbody>
            <tr>
              <td width="65%">Entre semillas</td>
              <td>
                {{#if seed.spaccing.seed}}
                  {{seed.spaccing.seed}}
                {{else}}
                  -
                {{/if}}
              </td>
            </tr>
            <tr>
              <td>Profundidad semillas</td>
              <td>
                {{#if seed.spaccing.seedDeep}}
                  {{seed.spaccing.seedDeep}}
                {{else}}
                  -
                {{/if}}
              </td>
            </tr>
            <tr>
              <td>Entre plantas</td>
              <td>
                {{#if seed.spaccing.plants}}
                  {{seed.spaccing.plants}}
                {{else}}
                  -
                {{/if}}
              </td>
            </tr>
            <tr>
              <td>Entre líneas de plantación</td>
              <td>
                {{#if seed.spaccing.plantLines}}
                  {{seed.spaccing.plantLines}}
                {{else}}
                  -
                {{/if}}
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-sm-12">
      <div class="panel panel-default">
        <div class="panel-heading">
          <h3 class="panel-title">Sol y sombra</h3>
        </div>
        <table class="table">
          <tbody>
            <tr>
              <td width="65%">
                Grado de exposición al sol
              </td>
              <td>
                {{stars seed.sun.sunExposition}} ️
              </td>
            </tr>
            <tr>
              <td>
              </td>
              <td>
                {{#if seed.sun.sunExpositionDescription}}
                  {{seed.sun.sunExpositionDescription}}
                {{else}}
                  -
                {{/if}}
              </td>
            </tr>
            <tr>
              <td>
                Grado de exposición a la sombra
              </td>
              <td>
                {{moons seed.sun.shadowExposition}}
              </td>
            </tr>
            <tr>
              <td>
              </td>
              <td>
                {{#if seed.sun.shadowExpositionDescription}}
                  {{seed.sun.shadowExpositionDescription}}
                {{else}}
                  -
                {{/if}}
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-sm-12">
      <div class="panel panel-default">
        <div class="panel-heading">
          <h3 class="panel-title">Regado</h3>
        </div>
        <table class="table">
          <tbody>
            <tr>
              <td width="65%">
                Grado de regado
              </td>
              <td>
                {{water seed.water.exposition}} ️
              </td>
            </tr>
            <tr>
              <td>
              </td>
              <td>
                {{#if seed.water.expositionDescription}}
                  {{seed.water.expositionDescription}}
                {{else}}
                  -
                {{/if}}
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-sm-12">
      <div class="panel panel-default">
        <div class="panel-heading">
          <h3 class="panel-title">Tierra</h3>
        </div>
        <table class="table">
          <tbody>
            <tr>
              <td width="65%">Admite cualquier tipo de tierra</td>
              <td>
                {{#if seed.land.type.any}}
                  ✅
                {{else}}
                  ❌
                {{/if}}
              </td>
            </tr>
            <tr>
              <td>PH</td>
              <td>
                {{seed.land.ph.from}}
                {{#if seed.land.ph.to}}
                  a {{seed.land.ph.to}}
                {{/if}}
              </td>
            </tr>
          </tbody>
        </table>
      </div>
     </div>
  </div>

  <div class="row">
    {{#each seed.notes}}
      <div class="col-md-4">
        <div class="note note-yellow">
          <p>{{.}}</p>
        </div>
      </div>
    {{/each}}
  </div>

  {{#if isInRole 'super-admin,admin,editor'}}
    <div class="row">
      <div class="col-md-4">
        <a class="btn btn-primary" href="{{urlFor 'seeds.one.edit' _id=seed._id}}">Editar</a>
      </div>
    </div>
  {{/if}}
  
</template>

<template name="seedsAdd">
  {{> breadcrumb}}
  <h2 class="page-header">Crear una nueva semilla</h2>
  {{> quickForm collection="Seeds" id="seedFormInsert" type="insert"}}
</template>

<template name="seedsEdit">
  {{> breadcrumb}}
  <h2 class="page-header">Actualizar: {{seed.variant}}</h2>
  {{> quickForm collection="Seeds" id="seedFormUpdate" type="update" doc=seed}}
</template>
