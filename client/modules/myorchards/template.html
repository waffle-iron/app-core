<template name="myOrchards">

  {{#if checkArray myOrchards}}
    
    <h2 class="page-header">
      Huertos
      <div class="pull-right">
        <a class="btn btn-success" href="{{pathFor 'myorchards.new'}}" role="button">Añadir huerto</a>
      </div>
    </h2>

    <!-- <div class="map-container">
      {{> googleMap name="exampleMap" options=exampleMapOptions}}
    </div> -->

    <div class="row">

      <div class="col-md-12">

        <div class="panel panel-default">
          <table class="table valign">
            <thead>
              <tr>
                <th width="150">Nombre</th>
                <th>Descripción</th>
                <th></th>
              </tr>
            </thead>
            <tbody>
              {{#each myOrchards}}
                {{> myOrchardsTableItem}}
              {{/each}}
            </tbody>
          </table>
        </div>

      </div>

    </div>

    <h3>Elementos</h3>

    <div class="row">
      <div class="col-md-12">
        <table class="table table-condensed table-bordered table-striped">
          <thead>
            <tr>
              <th width="25px"></th>
              <th width="15%">Nombre</th>
              <th>Huerto</th>
              <th width="100px"></th>
            </tr>
          </thead>
          <tbody>
            {{#each myBenchs}}
              {{> myOrchardBenchsTableItem}}
            {{/each}}
            {{#each myTrees}}
              {{> myOrchardTreesTableItem}}
            {{/each}}
          </tbody>
        </table>
      </div>
    </div>

  {{else}}
   {{> myOrchardsNoContent}}
  {{/if}}

</template>

<template name="myOrchardsNoContent">
  <h2 class="page-header">Administra tus huertos</h2>
  
  <div class="row">
    <div class="col-md-12">
      <p>Los huertos de Tiempo de Siembra te facilitan la gestión
        y registro de actividades de tus huertos, además de sugerirte asociaciones
        de cultivos en base a tus plantaciones y más cosas.</p>
      {{#autoForm collection="MyOrchards" id="myOrchardsInsert" type="insert"}}
        <fieldset>
          {{> afQuickField autofocus='true' name='name' label='Nombre para tu primer huerto'}}
        </fieldset>
        <button type="submit" class="btn btn-primary">Comenzar</button>
      {{/autoForm}}
    </div>
  </div>
</template>

<template name="myOrchardsNotLogged">
  <div class="jumbotron">
    <div class="container">
      <p class="nom">Necesitas iniciar sesión para utilizar esta opción.</p>
    </div>
  </div>

</template>

<template name="myOrchardBenchsTableItem">
  <tr>
    <td>🌱</td>
    <td>{{name}}</td>
    <td>
      <a href="{{pathFor "myorchards.one" _id=orchardId}}">{{myOrchardName orchardId}}</a>
    </td>

    {{#if orchardId}}
      <td><a href="{{pathFor "myorchards.one.benchs.one.edit" _id=orchardId bench=_id}}">Editar</a></td>
    {{else}}
      <td><a href="{{pathFor "myorchards.benchs.one.edit"}}">Editar</a></td>
    {{/if}}
  </tr>
</template>

<template name="myOrchardTreesTableItem">
  <tr>
    <td>🌳</td>
    <td>{{name}}</td>
    <td>
      <a href="{{pathFor "myorchards.one" _id=orchardId}}">{{myOrchardName orchardId}}</a>
    </td>

    {{#if orchardId}}
      <td><a href="{{pathFor "myorchards.one.trees.one.edit" _id=orchardId tree=_id}}">Editar</a></td>
    {{else}}
      <td><a href="{{pathFor "myorchards.trees.one.edit"}}">Editar</a></td>
    {{/if}}
  </tr>
</template>

<template name="myOrchardsTableItem">

  <tr>
    <td> <a href="{{pathFor 'myorchards.one'}}">{{name}}</a> </td>
    <td> <a href="{{pathFor 'myorchards.one'}}">{{description}}</a> </td>
    <td>
      <div class="pull-right">
        <a class="btn btn-sm btn-default" href="{{pathFor 'myorchards.one.edit'}}">Editar</a>
        <a class="btn btn-sm btn-danger remove-item" href="#">Eliminar</a>
      </div>
    </td>
  </tr>

</template>

<template name="myOrchardsNew">
  <h2 class="page-header">Crear nuevo huerto</h2>
  {{> quickForm collection="MyOrchards" id="myOrchardsInsert" type="insert"}}
</template>

<template name="myOrchardsEdit">
  <h2 class="page-header">Editar: {{myOrchard.name}}</h2>
  {{> quickForm collection="MyOrchards" id="myOrchardsUpdate" type="update" doc=myOrchard}}
</template>
